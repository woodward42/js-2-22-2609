(()=>{"use strict";const t={items:[],shown:!1,container:null,itemsContainer:null,url:"https://raw.githubusercontent.com/kellolo/static/master/JSON/basket.json",init(){this.container=document.querySelector("#basket"),this.itemsContainer=document.querySelector("#basket-items"),this.getData(this.url).then((t=>{this.items=t.content})).finally((()=>{this._render(),this._handleActions()}))},getData:t=>fetch(t).then((t=>t.json())),_render(){let t="";this.items.forEach((e=>{t+=`<div class="drop__box" data-id="${e.productId}">\n                        <a class="drop__img" href="single.html"><img src="${e.productImg}" alt="#" width="72" height="85"></a>\n                        <div class="drop__info">\n                            <a href="single.html" class="drop__title">${e.productName}</a>\n                            <img src="../src/assets/imgs/drop_cart/stars.png" alt="#">\n                            <div class="drop__price"><span class="drop__count" data-id="${e.productId}">${e.amount}</span><span class="drop__span">\n                            x\n                            </span>$${e.productPrice}</div>\n                        </div>\n                        <button class="drop__cancel fas fa-times-circle" data-id="${e.productId}" name="remove">\n                        <button>\n                    </div>`})),this.itemsContainer.innerHTML=t},_handleActions(){document.querySelector("#basket-toggler").addEventListener("click",(()=>{this.shown=!this.shown,this.container.classList.toggle("invisible")})),this.container.addEventListener("click",(t=>{console.log(t.target.name),"remove"==t.target.name&&this._remove(t.target.dataset.id)}))},add(t){let e=this.items.find((e=>e.productId==t.productId));e?e.amount++:this.items.push(Object.assign(t,{amount:1})),this._render()},_remove(t){let e=this.items.find((e=>e.productId==t));e.amount>1?e.amount--:this.items.splice(this.items.indexOf(e),1),this._render()}};({container:null,url:"https://raw.githubusercontent.com/kellolo/static/master/JSON/catalog.json",items:[],basket:null,init(){this.container=document.querySelector("#catalog"),this.getData(this.url).then((t=>{this.items=t})).finally((()=>{this._render(),this.basket=basket,this.handleActions()}))},getData:t=>fetch(t).then((t=>t.json())),handleActions(){this.container.addEventListener("click",(t=>{if("add"==t.target.name){let e=t.target.dataset,a={productId:e.id,productPrice:+e.price,productName:e.name,productImg:e.image};this.basket.add(a)}}))},_render(){let t="";this.items.forEach((e=>{t+=function(t){return`<div class="catalog__item" id="${t.productId}">\n    <button \n        class="catalog__bucket" \n        name="add"\n        data-id="${t.productId}" \n        data-price="${t.productPrice}" \n        data-name="${t.productName}" \n        data-image="${t.productImg}"\n    >\n        <img class="catalog__hidden_img" \n        src="https://raw.githubusercontent.com/Eliseev88/geekbrains/3fdc76c4d5e84b1398b168e6239b8651dce01f6f/products/Forma_1_copy.svg" alt="#">\n        <span class="catalog__hidden_text">Add to Cart</span>\n    </button>\n    <div class="catalog__photo">\n        <img class="catalog__img" src="${t.productImg}" alt="#">\n    </div>\n    <div class="catalog__content">\n        <a class="catalog__name" href="#">${t.productName}</a>\n        <div class="catalog__price">$${t.productPrice}.00</div>\n    </div>\n</div>`}(e)})),this.container.innerHTML=t}}).init(),t.init()})();